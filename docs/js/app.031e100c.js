(function(t){function e(e){for(var a,o,c=e[0],r=e[1],l=e[2],d=0,f=[];d<c.length;d++)o=c[d],i[o]&&f.push(i[o][0]),i[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,c=1;c<n.length;c++){var r=n[c];0!==i[r]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},i={app:0},s=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"09fa":function(t,e,n){},"0d3d":function(t,e,n){},"1ec0":function(t,e,n){},2856:function(t,e,n){},"289d":function(t,e,n){"use strict";var a=n("1ec0"),i=n.n(a);i.a},"357b":function(t,e,n){"use strict";var a=n("a87e"),i=n.n(a);i.a},"3fae":function(t,e,n){"use strict";var a=n("cc28"),i=n.n(a);i.a},"478d":function(t,e,n){"use strict";var a=n("0d3d"),i=n.n(a);i.a},"4ee6":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"},on:{click:t.contextMenuClose}},[t.userMustTakeAction?n("user-action",{attrs:{checkOnline:t.checkOnline,checkOnlineUrl:t.checkOnlineUrl,historyReturn:t.historyReturn,redirectUri:t.redirectUri,generalUserData:t.generalUserData,client_id:t.clientId},on:{allSetUp:t.initApp}}):t._e(),t.userMustTakeAction||1!=t.pageShown?t._e():n("quick-transaction",{attrs:{fileData:t.fileData}}),t.userMustTakeAction||0!=t.pageShown?t._e():[n("top-bar",{attrs:{accounts:t.fileData.accounts,dateData:{month:this.selectedDateTransactionsData.month.name,year:this.selectedDateTransactionsData.year}},on:{changeMonthOpen:t.changeMonthOpen,newTransaction:t.contextEditTransaction,manageAccountsWindowOpen:t.manageAccountsWindowOpen,changeHomescreen:t.changeHomescreen,changePageShown:t.changePageShown,reloadApp:t.reloadApp}}),n("main-content",{attrs:{tablesColumnTitles:t.fileData.settings.text.transactionsTableColumnTitles,accounts:t.fileData.accounts,transactions:t.selectedDateTransactionsData.transactions,userData:{generalUserData:t.generalUserData,client_id:t.clientId}},on:{contextMenu:t.contextMenu}}),t.changeMonthIsVisible?n("change-month",{attrs:{selectedMonthName:t.selectedDateTransactionsData.month.name,selectedYear:t.selectedDateTransactionsData.year,monthNames:t.fileData.settings.text.months},on:{changeMonthClose:t.changeMonthClose,changeSelectedDate:t.changeSelectedDate}}):t._e(),t.contextMenuIsVisible?n("context-menu",{attrs:{contextClickX:t.contextClickX,contextClickY:t.contextClickY},on:{contextEditTransaction:t.contextEditTransaction,contextDeleteTransaction:t.contextDeleteTransaction}}):t._e(),t.newEditTransactionIsVisible?n("new-edit-transaction",{attrs:{editTransactionData:t.editTransactionData,accounts:t.fileData.accounts},on:{newEditTransactionWindowClose:t.newEditTransactionWindowClose,addTransaction:t.addTransaction,updateTransaction:t.updateTransaction}}):t._e(),t.manageAccountsIsVisible?n("manage-accounts",{attrs:{data:t.fileData},on:{manageAccountsWindowClose:t.manageAccountsWindowClose}}):t._e(),n("notification-box",{class:{visible:t.notificationIsVisible},attrs:{msg:t.notificationMsg,icon:t.notificationIcon}}),t.contextDeleteConfirmationVisible?n("context-delete-confirmation"):t._e()]],2)},s=[],o=(n("456d"),n("ac4d"),n("8a81"),n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row is-mobile middle-xs between-xs",attrs:{id:"top-bar"}},[n("div",{staticClass:"col-xs-8 col-sm-6",attrs:{id:"top-bar-left"}},[n("div",{attrs:{id:"top-bar-month"},on:{click:t.changeMonth}},[n("span",{staticClass:"jam jam-calendar"}),n("span",[t._v(t._s(t.dateData.month))]),n("span",[t._v(t._s(t.dateData.year))])]),n("div",{attrs:{id:"top-bar-new"},on:{click:t.newTransaction}},[t.accounts.length<1?n("div",{staticClass:"no-accounts"},[t._m(0)]):t._e(),n("span",{staticClass:"jam jam-plus"}),n("span",[t._v("Add Transaction")])])]),n("div",{staticClass:"col-xs-4 col-sm-6",attrs:{id:"top-bar-right"}},[n("div",{attrs:{id:"top-bar-settings-btn"},on:{click:function(e){t.settingsVisible=!t.settingsVisible}}},[n("span",{staticClass:"jam jam-cog"})]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.settingsVisible,expression:"settingsVisible"}],attrs:{id:"top-bar-settings"}},[n("ul",[n("li",{on:{click:t.openSettings}},[n("span",{staticClass:"jam jam-settings-alt"}),n("span",[t._v("Settings")])]),n("li",{on:{click:t.manageAccounts}},[n("span",{staticClass:"jam jam-archive"}),n("span",[t._v("Manage Accounts")])]),n("li",{on:{click:t.quickTransaction}},[n("span",{staticClass:"jam jam-plus-circle"}),n("span",[t._v("Quick Transaction")])]),n("li",{on:{click:t.changeHomescreen}},[n("span",{staticClass:"jam jam-home"}),n("span",[t._v("Change Homescreen")])]),n("li",{on:{click:t.changeFile}},[n("span",{staticClass:"jam jam-file"}),n("span",[t._v("Change File")])]),n("li",{on:{click:t.logout}},[n("span",{staticClass:"jam jam-plane"}),n("span",[t._v("Disconnect")])])])])])])}),c=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticClass:"jam jam-book"}),n("span",[t._v("No accounts")])])}],r={name:"TopBar",props:["dateData","accounts"],data:function(){return{settingsVisible:!1}},methods:{changeMonth:function(){this.$emit("changeMonthOpen")},newTransaction:function(){this.accounts.length>0&&(this.$parent.contextTransaction=null,this.$emit("newTransaction"))},openSettings:function(){},manageAccounts:function(){this.settingsVisible=!this.settingsVisible,this.$emit("manageAccountsWindowOpen")},quickTransaction:function(){this.settingsVisible=!this.settingsVisible,this.$emit("changePageShown")},changeHomescreen:function(){this.settingsVisible=!this.settingsVisible,this.$emit("changeHomescreen")},changeFile:function(){var t=this;this.settingsVisible=!this.settingsVisible,this.$vlf.getItem("file").then(function(e){null==e?(sessionStorage.removeItem("file"),sessionStorage.removeItem("file_path"),sessionStorage.removeItem("homescreen"),t.$emit("reloadApp")):t.$vlf.removeItem("file").then(function(){t.$vlf.removeItem("file_path").then(function(){t.$vlf.removeItem("homescreen").then(function(){t.$emit("reloadApp")})})})})},logout:function(){var t=this;this.settingsVisible=!this.settingsVisible,this.$vlf.clear().then(function(){sessionStorage.clear(),t.$emit("reloadApp")})},setSettingsTopOffset:function(){var t=document.getElementById("top-bar-settings-btn"),e=document.getElementById("top-bar-settings");e.style.top=t.offsetHeight+t.offsetTop+7+"px"}},computed:{},created:function(){},mounted:function(){this.setSettingsTopOffset()}},l=r,u=(n("b711"),n("2877")),d=Object(u["a"])(l,o,c,!1,null,"e26d4392",null);d.options.__file="TopBar.vue";var f=d.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"user-action"}},[t.loading?[n("div",{staticClass:"loading"},[n("h1",{staticStyle:{opacity:"0"}},[t._v("Soon...")]),n("h2",[n("span",{staticClass:"jam jam-disc"}),n("span",[t._v("\n                    "+t._s(t.loadingMessage)+"\n                ")])])])]:t._e(),t.offlineError?[n("div",{staticClass:"offline"},[t._m(0),n("div",{on:{click:t.checkStorage}},[n("span",[t._v("Retry")])])])]:t._e(),"login"!=t.userAction||t.offlineError?t._e():[n("div",{staticClass:"login"},[n("h1",[t._v("Welcome")]),n("h2",[t._v("Please login to Dropbox")]),n("a",{staticClass:"button",attrs:{href:t.authUrl,id:"button-login"},on:{click:t.login}},[n("span",{staticClass:"jam jam-key"}),n("span",[t._v("Login")])]),n("div",{staticClass:"checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model:checked",value:t.rememberMe,expression:"rememberMe",arg:"checked"}],attrs:{id:"login-checkbox",type:"checkbox"},domProps:{checked:Array.isArray(t.rememberMe)?t._i(t.rememberMe,null)>-1:t.rememberMe},on:{change:function(e){var n=t.rememberMe,a=e.target,i=!!a.checked;if(Array.isArray(n)){var s=null,o=t._i(n,s);a.checked?o<0&&(t.rememberMe=n.concat([s])):o>-1&&(t.rememberMe=n.slice(0,o).concat(n.slice(o+1)))}else t.rememberMe=i}}}),n("label",{attrs:{for:"login-checkbox"}},[t._v("Remember me (app)")])])])],"select_file"!=t.userAction||t.offlineError?t._e():[n("div",{staticClass:"select_file"},[n("h1",[t._v("Hello "+t._s(t.generalUserData.account.name))]),""==t.filesLoadingMessage?[n("span",{staticClass:"create_new",on:{click:t.newFileNameSelectOpen}},[t._v("Create new")]),t.newFileNameSelect?[n("div",{attrs:{id:"new-file-name-select"}},[""!=t.newFileNameSelectMessage?n("div",{attrs:{id:"new-file-name-select-message"}},[t._v("\n                            "+t._s(t.newFileNameSelectMessage)+"\n                        ")]):t._e(),n("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.createFile(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newFileNameSelectName,expression:"newFileNameSelectName"}],attrs:{type:"text"},domProps:{value:t.newFileNameSelectName},on:{input:function(e){e.target.composing||(t.newFileNameSelectName=e.target.value)}}}),n("div",{attrs:{id:"new-file-name-select-options"}},[t._m(1),n("div",{attrs:{id:"new-file-name-select-cancel"},on:{click:t.newFileNameSelectClose}},[n("button",{attrs:{type:"reset"}},[t._v("Cancel")])])])])])]:t._e(),n("h2",[t._v("Select a transactions file")]),n("div",{staticClass:"row center-xs"},[n("ul",{staticClass:"col-xs-12 col-sm-10 col-md-8 col-lg-6"},[""!=t.path?n("li",{on:{click:t.clickFolderUp}},[t._v("..")]):t._e(),t._l(t.userFiles.folders,function(e){return n("li",{staticClass:"folder",on:{click:function(n){t.clickFolder(e)}}},[n("span",{staticClass:"jam jam-folder-f"}),n("span",[t._v(t._s(e.name))])])}),t._l(t.userFiles.files,function(e){return n("li",{staticClass:"file",on:{click:function(n){t.clickFile(e)}}},[n("span",{staticClass:"jam jam-file"}),n("span",[t._v(t._s(e.name))])])})],2)])]:t._e(),""!=t.filesLoadingMessage?[n("h2",[n("span",{staticClass:"jam jam-disc"}),n("span",[t._v("\n                        "+t._s(t.filesLoadingMessage)+"\n                    ")])])]:t._e()],2)]],2)},h=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",[n("span",{staticClass:"jam jam-plug"}),n("span",[t._v("\n                    It seems you are offline\n                ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"new-file-name-select-add"}},[n("button",{attrs:{type:"submit"}},[t._v("Create")])])}],v=(n("c5f6"),n("7cdf"),n("7f7f"),n("28a5"),{name:"UserAction",props:["generalUserData","historyReturn","redirectUri","client_id","checkOnline","checkOnlineUrl"],data:function(){return{userAction:"",remember_me:!1,authUrl:"",rememberMe:!1,offlineError:!1,loading:!1,loadingMessage:"",newFileNameSelect:!1,newFileNameSelectMessage:"",newFileNameSelectName:"Finances Manager",filesLoadingMessage:"",userFiles:{folders:[],files:[]},path:"",emptyFile:{lastId:{transactions:-1,accounts:-1},transactions:[],accounts:[],settings:{text:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],transactionsTableColumnTitles:["Title","Day","Amount"]},visual:{}}}}},methods:{newFileNameSelectOpen:function(){this.newFileNameSelect=!0,setTimeout(function(){document.querySelector("#new-file-name-select > form > input").focus()},100)},newFileNameSelectClose:function(){this.newFileNameSelect=!1,this.newFileNameSelectName="Finances Manager",this.newFileNameSelectMessage=""},createFile:function(){function t(t){t.newFileNameSelect=!1;var e=!1,a=!0,i=!1,s=void 0;try{for(var o,c=t.userFiles.files[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var r=o.value,l=r.name.split(".json")[0];if(l==t.newFileNameSelectName){e=!0;break}}}catch(t){i=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}if(e)t.newFileNameSelectMessage="File exists",t.newFileNameSelect=!0;else{t.newFileNameSelectMessage="",t.filesLoadingMessage="Creating file",console.log(t.path+"/"+t.newFileNameSelectName+".json");var u=new Blob([JSON.stringify(t.emptyFile)],{type:"JSON"}),d=n("0032").Dropbox,f=new d({accessToken:t.generalUserData.account.access_token});f.filesUpload({path:t.path+"/"+t.newFileNameSelectName+".json",contents:u,mode:"overwrite",autorename:!0,mute:!0}).then(function(e){t.checkFile({path_lower:t.path+"/"+t.newFileNameSelectName+".json"})}).catch(function(t){console.error(t)}),t.newFileNameSelectName="Finances Manager",t.newFileNameSelectMessage=""}}var e=this;if(e.checkOnline){var a=new window.XMLHttpRequest;a.open("HEAD",this.checkOnlineUrl,!0),a.timeout=5750,a.addEventListener("load",function(n){t(e)}),a.addEventListener("error",function(){e.offlineError=!0}),a.addEventListener("timeout",function(){e.offlineError=!0}),a.send(null)}else t(e)},useFile:function(t,e){this.$parent.userMustTakeAction=!1,this.userAction="",this.$parent.fileData=t,this.generalUserData.selectedFilePath=e,this.$emit("allSetUp")},fileIsValid:function(t){try{JSON.parse(t)}catch(t){return!1}return t=JSON.parse(t),!(!Number.isInteger(t.lastId.transactions)||!Number.isInteger(t.lastId.accounts)||void 0==t.transactions||t.transactions.constructor!==Array||void 0==t.accounts||t.accounts.constructor!==Array||void 0==t.settings||void 0==t.settings.text||void 0==t.settings.text.months||void 0==t.settings.text.transactionsTableColumnTitles||void 0==t.settings.visual)},checkFile:function(t){function e(e){var a=n("0032").Dropbox,i=new a({accessToken:e.generalUserData.account.access_token});e.filesLoadingMessage="Checking file",i.filesDownload({path:t.path_lower}).then(function(n){var a=new FileReader;a.addEventListener("loadend",function(){e.fileIsValid(a.result)&&e.$vlf.getItem("access_token").then(function(n){null!=n?e.$vlf.setItem("file",JSON.parse(a.result)).then(function(){e.$vlf.setItem("file_path",t.path_lower)}):(sessionStorage.setItem("file",JSON.parse(a.result)),sessionStorage.setItem("file_path",t.path_lower)),e.useFile(a.result,t.path_lower)}),e.filesLoadingMessage=""}),a.readAsText(n.fileBlob)}).catch(function(t){console.error(t)})}var a=this;if(a.checkOnline){var i=new window.XMLHttpRequest;i.open("HEAD",this.checkOnlineUrl,!0),i.timeout=5750,i.addEventListener("load",function(n){e(a,t)}),i.addEventListener("error",function(){a.offlineError=!0}),i.addEventListener("timeout",function(){a.offlineError=!0}),i.send(null)}else e(a,t)},clickFolderUp:function(){this.path=this.path.split("/");for(var t="",e=1;e<this.path.length-1;e++)t+="/"+this.path[e];this.path=t,this.getFiles(this.path)},clickFile:function(t){var e=t.name.split(".");e=e[e.length-1],"json"==e&&this.checkFile(t)},clickFolder:function(t){this.path=t.path_lower,this.getFiles(t.path_lower)},displayFiles:function(t){this.userFiles={folders:[],files:[]};var e=!0,n=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var o=i.value;"file"==o[".tag"]?this.userFiles.files.push(o):this.userFiles.folders.push(o)}}catch(t){n=!0,a=t}finally{try{e||null==s.return||s.return()}finally{if(n)throw a}}},getFiles:function(t){function e(t,e){var a=n("0032").Dropbox,i=new a({accessToken:t.generalUserData.account.access_token});t.filesLoadingMessage="Displaying files",i.filesListFolder({path:e}).then(function(e){t.filesLoadingMessage="",t.displayFiles(e.entries)}).catch(function(t){console.error(t)})}var a=this;if(a.checkOnline){var i=new window.XMLHttpRequest;i.open("HEAD",this.checkOnlineUrl,!0),i.timeout=5750,i.addEventListener("load",function(n){e(a,t)}),i.addEventListener("error",function(){a.offlineError=!0}),i.addEventListener("timeout",function(){a.offlineError=!0}),i.send(null)}else e(a,t)},login:function(){this.$vlf.setItem("remember_me",this.rememberMe)},setUpLogin:function(){var t=n("0032").Dropbox,e=new t({clientId:this.client_id});this.authUrl=e.getAuthenticationUrl(this.redirectUri),this.$parent.userMustTakeAction=!0,this.userAction="login"},checkStorage:function(){var t=this;this.$vlf.getItem("file").then(function(e){null!=e||null!=sessionStorage.getItem("file")?(null==e&&(e=sessionStorage.getItem("file")),t.$vlf.getItem("file_path").then(function(n){null==n&&(n=sessionStorage.getItem("file_path"));var a=new window.XMLHttpRequest;a.open("HEAD",t.checkOnlineUrl,!0),a.timeout=5750,a.addEventListener("load",function(e){t.checkFile({path_lower:n})}),a.addEventListener("error",function(){console.log("error"),t.useFile(e,n)}),a.addEventListener("timeout",function(){console.log("timeout"),t.useFile(e,n)}),a.send(null)})):t.$vlf.getItem("access_token").then(function(e){if(null!=e||null!=sessionStorage.getItem("access_token")){var a=function(t,e){var a=n("0032").Dropbox,i=new a({accessToken:e});t.loading=!0,t.loadingMessage="Loading saved user data",i.usersGetCurrentAccount().then(function(n){t.generalUserData.account.name=n.name.familiar_name,t.generalUserData.account.access_token=e,t.userAction="select_file",t.getFiles(""),t.loading=!1,t.loadingMessage=""}).catch(function(e){t.loading=!1,t.loadingMessage="",t.$vlf.removeItem("access_token"),sessionStorage.removeItem("access_token"),t.setUpLogin(),console.error(e)})};if(null==e&&(e=sessionStorage.getItem("access_token")),t.checkOnline){var i=new window.XMLHttpRequest;i.open("HEAD",t.checkOnlineUrl,!0),i.timeout=5750,i.addEventListener("load",function(n){a(t,e)}),i.addEventListener("error",function(){t.offlineError=!0}),i.addEventListener("timeout",function(){t.offlineError=!0}),i.send(null)}else a(t,e)}else t.setUpLogin()})})},authPage:function(){var t=this,e=window.location.hash.split("#")[1];if(void 0!=e&&e.indexOf("error_description")<0){var n=e.split("&"),a=[];t.$vlf.getItem("remember_me").then(function(e){t.$vlf.removeItem("remember_me");for(var i=0;i<n.length;i++){var s=n[i].split("=");switch(a.push(s),s[0]){case"access_token":t.generalUserData.account.access_token=s[1],e?t.$vlf.setItem("access_token",s[1]):sessionStorage.setItem("access_token",s[1]);break}}history.pushState(null,"",t.historyReturn),t.checkStorage()})}else void 0!=e&&e.indexOf("error_description")>-1&&history.pushState(null,"",this.historyReturn),t.checkStorage()}},created:function(){this.authPage()},mounted:function(){}}),p=v,g=(n("ba11"),Object(u["a"])(p,m,h,!1,null,"720dcbb0",null));g.options.__file="UserAction.vue";var w=g.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"quick-transaction"}},[n("div",{staticClass:"row center-xs"},[n("div",{staticClass:"col-xs-12 col-sm-6 col-md-5 col-lg-4",attrs:{id:"top-bar"}},[n("div",{attrs:{id:"change-page"},on:{click:t.changeHomepage}},[n("span",{staticClass:"jam jam-chevrons-square-right"}),n("span",[t._v("Main App")])])])]),n("div",{staticClass:"row center-xs"},[n("div",{staticClass:"col-xs-12 col-sm-6 col-md-5 col-lg-4",attrs:{id:"container"}},[t.fileData.accounts.length<1?[t._m(0)]:t._e(),t._m(1),n("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.add(e)}}},[n("div",{attrs:{id:"amount"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],staticClass:"input",attrs:{type:"number",placeholder:"0"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}})]),n("div",{attrs:{id:"account"}},[n("label",{attrs:{for:"account-input"}},[t._v("Account")]),n("div",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedAccount,expression:"selectedAccount"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.selectedAccount=e.target.multiple?n:n[0]}}},t._l(t.fileData.accounts,function(e){return n("option",[t._v(t._s(e.title))])}))])]),n("div",{attrs:{id:"transaction-type"}},[n("div",{attrs:{id:"transaction-type-income"},on:{click:function(e){t.toggleType(e)}}},[n("span",[t._v("Income")])]),n("div",{attrs:{id:"transaction-type-expense"},on:{click:function(e){t.toggleType(e)}}},[n("span",[t._v("Expense")])])]),n("button",{attrs:{id:"add",type:"submit"}},[t._v("Add")])])],2)])])},_=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"no-accounts"},[n("div",[n("span",{staticClass:"jam jam-book"}),n("h3",[t._v("You have no accounts")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"header"}},[n("span",[t._v("Quick Add Transaction")])])}],b={name:"QuickTransaction",props:["fileData"],data:function(){return{amount:null,type:1,selectedAccount:null}},methods:{toggleType:function(t){var e,n=document.querySelectorAll("#transaction-type > div");e="SPAN"==t.target.nodeName?t.target.parentElement:t.target;var a=e.textContent,i=!0,s=!1,o=void 0;try{for(var c,r=n[Symbol.iterator]();!(i=(c=r.next()).done);i=!0){var l=c.value;l.classList.contains("selected")&&l.classList.remove("selected")}}catch(t){s=!0,o=t}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}switch(a){case"Income":this.type=0;break;case"Expense":this.type=1;break}e.classList.add("selected")},add:function(){if(null!=this.amount&&null!=this.selectedAccount){var t=this;this.$vlf.getItem("file").then(function(e){var n,a=new Date;for(n=0;n<t.fileData.accounts.length;n++)if(t.fileData.accounts[n].title==t.selectedAccount)break;e.lastId.transactions+=1,e.transactions.push({amount:t.amount,account:n,day:a.getDate(),month:a.getMonth()+1,year:a.getFullYear(),to:null,description:"",title:"-",id:e.lastId.transactions,type:t.type}),t.$parent.fileData=e,t.$vlf.setItem("file",e).then(function(){t.$parent.updateTransactions(),t.$parent.uploadFile(),t.amount=null,t.type=1,t.selectedAccount=null;var e=document.querySelectorAll("#transaction-type > div"),n=document.querySelector("#amount > input"),a=document.querySelectorAll("#account select > option");n.focus(),e[t.type].classList.add("selected");for(var i=0;i<t.fileData.accounts.length;i++)if(t.fileData.accounts[i].title==a[0].textContent){t.selectedAccount=t.fileData.accounts[i].title;break}})})}},changeHomepage:function(){this.$parent.pageShown=0}},created:function(){},mounted:function(){var t=document.querySelectorAll("#transaction-type > div"),e=document.querySelector("#amount > input");t[this.type].classList.add("selected"),this.fileData.accounts.length>0&&setTimeout(function(){var t=document.querySelectorAll("#account select > option");e.focus();for(var n=0;n<this.fileData.accounts.length;n++)if(this.fileData.accounts[n].title==t[0].textContent){this.selectedAccount=this.fileData.accounts[n].title;break}}.bind(this),500)},updated:function(){}},T=b,D=(n("5d6e"),Object(u["a"])(T,y,_,!1,null,"1c9a273c",null));D.options.__file="QuickTransaction.vue";var x=D.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row",attrs:{id:"main-content"}},[n("transactions",{staticClass:"col-xs-12 col-sm-8",attrs:{selectedAccounts:t.selectedAccounts,transactions:t.transactions,tablesColumnTitles:t.tablesColumnTitles},on:{contextMenu:t.contextMenu}}),n("side-menu",{staticClass:"col-xs-12 col-sm-4 first-xs last-sm",attrs:{accounts:t.accounts,transactions:t.transactions},on:{updateSelectedAccounts:t.updateSelectedAccounts}})],1)},S=[],C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"transactions"}},[n("div",{staticClass:"row top-xs"},[n("div",{staticClass:"col-xs-12 col-sm-6"},[n("div",{attrs:{id:"transactions-income"}},[t._m(0),n("ul",{staticClass:"transactions-top-row"},t._l(t.tablesColumnTitles,function(e){return n("li",[t._v(t._s(e))])})),n("ul",{staticClass:"transactions-content"},t._l(t.setTransactionsByType.income,function(e){return n("li",{on:{contextmenu:function(n){n.preventDefault(),t.contextMenu(e,n,0)},click:function(e){t.transactionClick(e)}}},[n("ul",[n("li",[t._v(t._s(e.title))]),n("li",[t._v(t._s(e.day))]),n("li",[t._v(t._s(e.amount))])]),n("div",{staticClass:"description"},[t._v("\n                            "+t._s(e.description)+"\n                        ")])])}))])]),n("div",{staticClass:"col-xs-12 col-sm-6"},[n("div",{attrs:{id:"transactions-expenses"}},[t._m(1),n("ul",{staticClass:"transactions-top-row"},t._l(t.tablesColumnTitles,function(e){return n("li",[t._v(t._s(e))])})),n("ul",{staticClass:"transactions-content"},t._l(t.setTransactionsByType.expenses,function(e){return n("li",{on:{contextmenu:function(n){n.preventDefault(),t.contextMenu(e,n,1)},click:function(e){t.transactionClick(e)}}},[n("ul",[n("li",[t._v(t._s(e.title))]),n("li",[t._v(t._s(e.day))]),n("li",[t._v(t._s(e.amount))])]),n("div",{staticClass:"description"},[t._v("\n                            "+t._s(e.description)+"\n                        ")])])}))])])])])},A=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticClass:"jam jam-log-in"}),n("span",[t._v("In")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticClass:"jam jam-log-out"}),n("span",[t._v("Out")])])}],M={name:"Transactions",props:["tablesColumnTitles","selectedAccounts","transactions"],data:function(){return{transactionsByType:{income:[],expenses:[]}}},methods:{contextMenu:function(t,e){this.$emit("contextMenu",t,e)},transactionClick:function(t){var e;e="LI"==t.target.nodeName?t.target.parentNode.parentNode:t.target.parentNode,e.classList.contains("visible")?e.classList.remove("visible"):e.classList.add("visible")}},computed:{setTransactionsByType:function(){var t=[],e=[];if(this.selectedAccounts.length>0){var n=!0,a=!1,i=void 0;try{for(var s,o=this.transactions[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var c=s.value,r=!0,l=!1,u=void 0;try{for(var d,f=this.selectedAccounts[Symbol.iterator]();!(r=(d=f.next()).done);r=!0){var m=d.value;c.account==m?0==c.type?t.push(c):(c.type,e.push(c)):c.to==m&&t.push(c)}}catch(t){l=!0,u=t}finally{try{r||null==f.return||f.return()}finally{if(l)throw u}}}}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}}else{var h=!0,v=!1,p=void 0;try{for(var g,w=this.transactions[Symbol.iterator]();!(h=(g=w.next()).done);h=!0){var y=g.value;0==y.type?t.push(y):1==y.type&&e.push(y)}}catch(t){v=!0,p=t}finally{try{h||null==w.return||w.return()}finally{if(v)throw p}}}return{income:t,expenses:e}}},created:function(){}},I=M,N=(n("357b"),Object(u["a"])(I,C,A,!1,null,"1c09b390",null));N.options.__file="Transactions.vue";var $=N.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"side-menu"}},[n("div",{attrs:{id:"side-menu-totals"}},[n("div",{attrs:{id:"side-menu-total-budget"}},[t._m(0),n("span",[t._v(t._s(t.calculateTotals.total))])]),n("div",{attrs:{id:"side-menu-side-totals"}},[n("div",{attrs:{id:"side-menu-total-income"}},[n("h3",[t._v("Total Income")]),n("span",[t._v(t._s(t.calculateTotals.income))])]),n("div",{attrs:{id:"side-menu-total-expenses"}},[n("h3",[t._v("Total Expenses")]),n("span",[t._v(t._s(t.calculateTotals.expenses))])])])]),n("div",{attrs:{id:"side-menu-accounts"}},[n("h3",{on:{click:t.toggleAccounts}},[n("span",[t._v("Accounts")])]),n("ul",t._l(t.accountTotals,function(e){return n("li",{on:{click:function(n){t.accountClick(n,e)}}},[n("ul",[n("li",[t._v(t._s(e.title)+":")]),n("li",[t._v(t._s(e.total))])])])}))])])},F=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticClass:"jam jam-coin"}),n("h3",[t._v("Total Budget")])])}],j={name:"SideMenu",props:["transactions","accounts"],data:function(){return{total:0,income:0,expenses:0,selectedAccounts:[],accountTotals:[]}},methods:{toggleAccounts:function(){var t=document.querySelector("#side-menu-accounts > ul");t.classList.contains("visible")?t.classList.remove("visible"):t.classList.add("visible")},accountClick:function(t,e){var n,a=!1;n="LI"==t.target.nodeName?t.target.parentNode.parentNode:t.target.parentNode;for(var i=0;i<this.selectedAccounts.length;i++)if(this.selectedAccounts[i]==e.id){this.selectedAccounts.splice(i,1),a=!0,n.classList.remove("selected");break}a||(n.classList.add("selected"),this.selectedAccounts.push(e.id)),this.$emit("updateSelectedAccounts",this.selectedAccounts)}},computed:{calculateTotals:function(){var t=this,e=0,n=0,a=function(e,n){var a=!0,i=!1,s=void 0;try{for(var o,c=t.accountTotals[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var r=o.value;if(r.id==e){r.total+=parseFloat(n);break}}}catch(t){i=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}},i=function(e,n){var a=!0,i=!1,s=void 0;try{for(var o,c=t.accountTotals[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var r=o.value;if(r.id==e){r.total-=parseFloat(n);break}}}catch(t){i=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}};if(this.selectedAccounts.length>0){var s=0,o=0,c=!0,r=!1,l=void 0;try{for(var u,d=this.transactions[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var f=u.value,m=!0,h=!1,v=void 0;try{for(var p,g=this.selectedAccounts[Symbol.iterator]();!(m=(p=g.next()).done);m=!0){var w=p.value;if(f.account==w)if(0==f.type)s+=parseFloat(f.amount);else if(1==f.type)o+=parseFloat(f.amount);else{o+=parseFloat(f.amount);var y=!1,_=!0,b=!1,T=void 0;try{for(var D,x=this.selectedAccounts[Symbol.iterator]();!(_=(D=x.next()).done);_=!0){var k=D.value;f.to==k&&(y=!0)}}catch(t){b=!0,T=t}finally{try{_||null==x.return||x.return()}finally{if(b)throw T}}y&&(s-=parseFloat(f.amount),o-=parseFloat(f.amount))}else f.to==w&&(s+=parseFloat(f.amount))}}catch(t){h=!0,v=t}finally{try{m||null==g.return||g.return()}finally{if(h)throw v}}}}catch(t){r=!0,l=t}finally{try{c||null==d.return||d.return()}finally{if(r)throw l}}return{income:s,expenses:o,total:s-o}}this.accountTotals=[];var S=!0,C=!1,A=void 0;try{for(var M,I=this.accounts[Symbol.iterator]();!(S=(M=I.next()).done);S=!0){var N=M.value;N["total"]=0,this.accountTotals.push(N)}}catch(t){C=!0,A=t}finally{try{S||null==I.return||I.return()}finally{if(C)throw A}}var $=!0,E=!1,F=void 0;try{for(var j,L=this.transactions[Symbol.iterator]();!($=(j=L.next()).done);$=!0){var O=j.value;0==O.type?(a(O.account,O.amount),e+=parseFloat(O.amount)):1==O.type?(i(O.account,O.amount),n+=parseFloat(O.amount)):(i(O.account,O.amount),a(O.to,O.amount))}}catch(t){E=!0,F=t}finally{try{$||null==L.return||L.return()}finally{if(E)throw F}}return this.income=e,this.expenses=n,this.total=e-n,{income:e,expenses:n,total:e-n}}},created:function(){}},L=j,O=(n("735b"),Object(u["a"])(L,E,F,!1,null,"13aa189f",null));O.options.__file="SideMenu.vue";var U=O.exports,V={name:"MainContent",components:{transactions:$,"side-menu":U},props:["tablesColumnTitles","transactions","accounts","userData"],data:function(){return{selectedAccounts:[],total:0,income:0,expenses:0}},methods:{contextMenu:function(t,e){this.$emit("contextMenu",t,e)},updateSelectedAccounts:function(t){this.selectedAccounts=t}},created:function(){},updated:function(){},mounted:function(){}},q=V,P=(n("81ff"),Object(u["a"])(q,k,S,!1,null,"66ec0183",null));P.options.__file="MainContent.vue";var Y=P.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"change-month"}},[n("div",{attrs:{id:"change-month-content"}},[t._m(0),n("div",{attrs:{id:"change-month-years"}},[n("span",{staticClass:"jam jam-chevron-left",on:{click:t.yearsDown}}),n("ul",t._l(5,function(e){return n("li",{on:{click:function(n){t.saveSelectedYear(t.yearsStart+e)}}},[t._v(t._s(t.yearsStart+e))])})),n("span",{staticClass:"jam jam-chevron-right",on:{click:t.yearsUp}})]),n("div",{attrs:{id:"change-month-months"}},[n("ul",t._l(t.monthNames,function(e){return n("li",{on:{click:function(n){t.saveSelectedMonth(e)}}},[t._v(t._s(e))])}))]),n("div",{attrs:{id:"change-month-controls"}},[n("div",{attrs:{id:"change-month-ok"},on:{click:t.ok}},[n("span",[t._v("OK")])]),n("div",{attrs:{id:"change-month-cancel"},on:{click:t.cancel}},[n("span",[t._v("Cancel")])])])])])},B=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"change-month-header"}},[n("span",[t._v("Change Month")])])}],W={name:"ChangeMonth",props:["monthNames","selectedMonthName","selectedYear"],data:function(){return{yearsStart:null,savedMonth:null,savedYear:this.selectedYear,savedMonthName:this.selectedMonthName}},methods:{calculateYearsStart:function(){this.yearsStart=this.selectedYear-3},initialSelectedMonth:function(){for(var t=document.querySelectorAll("#change-month-years li"),e=document.querySelectorAll("#change-month-months li"),n=0;n<t.length;n++)if(t[n].innerText==this.selectedYear){t[n].classList.add("selected");break}for(n=0;n<e.length;n++)if(e[n].innerText==this.selectedMonthName){e[n].classList.add("selected"),this.savedMonth=n+1;break}},yearsDown:function(){this.yearsStart-=5;for(var t=document.querySelectorAll("#change-month-years li"),e=0;e<5;e++)this.yearsStart+e+1==this.savedYear?t[e].classList.add("selected"):t[e].classList.remove("selected")},yearsUp:function(){this.yearsStart+=5;for(var t=document.querySelectorAll("#change-month-years li"),e=0;e<5;e++)this.yearsStart+e+1==this.savedYear?t[e].classList.add("selected"):t[e].classList.remove("selected")},saveSelectedYear:function(t){for(var e=document.querySelectorAll("#change-month-years li"),n=0;n<e.length;n++)if(e[n].innerText==this.savedYear){e[n].classList.remove("selected");break}for(var a=0;a<e.length;a++)if(e[a].innerText==t){e[a].classList.add("selected"),this.savedYear=e[a].innerText;break}},saveSelectedMonth:function(t){var e,n=document.querySelectorAll("#change-month-months li");for(e=0;e<n.length;e++)if(n[e].innerText==this.savedMonthName){n[e].classList.remove("selected");break}for(e=0;e<this.monthNames.length;e++)if(this.monthNames[e]==t){n[e].classList.add("selected"),this.savedMonth=e+1,this.savedMonthName=t;break}},ok:function(){this.$emit("changeSelectedDate",this.savedMonth,this.savedMonthName,this.savedYear)},cancel:function(){this.$emit("changeMonthClose")}},created:function(){this.calculateYearsStart()},mounted:function(){this.initialSelectedMonth()}},R=W,X=(n("7360"),Object(u["a"])(R,H,B,!1,null,"2f359f8a",null));X.options.__file="ChangeMonth.vue";var J=X.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:{top:t.contextClickY+"px",left:t.contextClickX+"px"},attrs:{id:"context-menu"}},[n("div",{on:{click:t.editTransaction}},[n("span",{staticClass:"jam jam-pencil"}),n("span",[t._v("Edit")])]),n("div",{on:{click:t.deleteTransaction}},[n("span",{staticClass:"jam jam-trash"}),n("span",[t._v("Delete")])])])},z=[],Q={name:"ContextMenu",props:["contextClickX","contextClickY"],data:function(){return{}},methods:{calculatePosition:function(){var t=document.querySelector("#context-menu");t.style.left=this.contextClickX,t.style.top=this.contextClickY},editTransaction:function(){this.$emit("contextEditTransaction")},deleteTransaction:function(){this.$emit("contextDeleteTransaction")}},created:function(){},mounted:function(){this.calculatePosition()}},G=Q,Z=(n("3fae"),Object(u["a"])(G,K,z,!1,null,"ee826db8",null));Z.options.__file="ContextMenu.vue";var tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"context-delete-confirmation"}},[n("div",{attrs:{id:"context-delete-confirmation-wrapper"}},[n("div",{attrs:{id:"context-delete-confirmation-content"}},[t._m(0),t._m(1),n("div",{attrs:{id:"context-delete-confirmation-options"}},[n("div",{attrs:{id:"context-delete-confirmation-yes"},on:{click:t.yes}},[n("span",[t._v("Yes")])]),n("div",{attrs:{id:"context-delete-confirmation-no"},on:{click:t.no}},[n("span",[t._v("No")])])])])])])},nt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"context-delete-confirmation-header"}},[n("span",[t._v("Confirmation Needed")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticClass:"jam jam-triangle-danger"}),n("span",[t._v("Delete Transaction")])])}],at={name:"ContextDeleteConfirmation",props:[],data:function(){return{}},methods:{yes:function(){this.$parent.deleteTransactionConfirmed()},no:function(){this.$parent.contextDeleteConfirmationVisible=!1}},created:function(){},mounted:function(){}},it=at,st=(n("90e5"),Object(u["a"])(it,et,nt,!1,null,"7999a5fe",null));st.options.__file="ContextDeleteConfirmation.vue";var ot=st.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"new-edit-transaction"}},[n("div",{attrs:{id:"new-edit-transaction-content"}},[n("div",{attrs:{id:"new-edit-transaction-header"}},[n("span",[t._v(t._s(t.getWindowTitle)+" Transaction")])]),n("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.add(e)}}},[n("div",{attrs:{id:"new-edit-transaction-amount"}},[n("label",{attrs:{for:"new-edit-transaction-amount-input"}},[t._v("Amount")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.windowTransactionData.amount,expression:"windowTransactionData.amount"}],attrs:{type:"number",name:"amount",id:"new-edit-transaction-amount-input",size:"10",placeholder:"0"},domProps:{value:t.windowTransactionData.amount},on:{input:function(e){e.target.composing||t.$set(t.windowTransactionData,"amount",e.target.value)}}})]),n("div",{attrs:{id:"new-edit-transaction-date"}},[n("div",{attrs:{id:"new-edit-transaction-date-day"}},[n("div",{staticClass:"select"},[n("select",{attrs:{name:"day",id:"new-edit-transaction-month-select"}},t._l(31,function(e){return n("option",{domProps:{value:e,selected:t.windowTransactionData.day==e}},[t._v(t._s(e))])}))])]),n("div",{attrs:{id:"new-edit-transaction-date-month"}},[n("div",{staticClass:"select"},[n("select",{attrs:{name:"month",id:"new-edit-transaction-month-select"}},t._l(12,function(e){return n("option",{domProps:{value:e,selected:t.windowTransactionData.month==e}},[t._v(t._s(e))])}))])]),n("div",{attrs:{id:"new-edit-transaction-date-year"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.windowTransactionData.year,expression:"windowTransactionData.year"}],attrs:{type:"number",name:"year",id:"new-edit-transaction-date-year-input",size:"10"},domProps:{value:t.windowTransactionData.year},on:{input:function(e){e.target.composing||t.$set(t.windowTransactionData,"year",e.target.value)}}})])]),n("div",{attrs:{id:"new-edit-transaction-title"}},[n("label",{attrs:{for:"new-edit-transaction-title-input"}},[t._v("Title")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.windowTransactionData.title,expression:"windowTransactionData.title"}],attrs:{type:"text",name:"title",value:"",id:"new-edit-transaction-title-input",size:"10"},domProps:{value:t.windowTransactionData.title},on:{input:function(e){e.target.composing||t.$set(t.windowTransactionData,"title",e.target.value)}}})]),n("div",{attrs:{id:"new-edit-transaction-description"}},[n("span",{staticClass:"jam jam-chevron-down"}),n("label",{attrs:{for:"new-edit-transaction-description-input"},on:{click:t.toggleDescription}},[t._v("Description")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.windowTransactionData.description,expression:"windowTransactionData.description"}],attrs:{type:"text",name:"description",value:"",id:"new-edit-transaction-description-input",size:"10"},domProps:{value:t.windowTransactionData.description},on:{input:function(e){e.target.composing||t.$set(t.windowTransactionData,"description",e.target.value)}}})]),n("div",{attrs:{id:"new-edit-transaction-account"}},[n("label",{attrs:{for:"new-edit-transaction-account"}},[t._v("From")]),n("div",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.windowTransactionData.account,expression:"windowTransactionData.account"}],attrs:{name:"account",id:"new-edit-transaction-account-select"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.windowTransactionData,"account",e.target.multiple?n:n[0])}}},t._l(t.accounts,function(e){return n("option",{domProps:{value:e.title}},[t._v(t._s(e.title))])}))])]),2==t.windowTransactionData.type?n("div",{attrs:{id:"new-edit-transaction-to"}},[n("label",{attrs:{for:"new-edit-transaction-to"}},[t._v("To")]),n("div",{staticClass:"select"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.windowTransactionData.to,expression:"windowTransactionData.to"}],attrs:{name:"to",id:"new-edit-transaction-to-select"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.windowTransactionData,"to",e.target.multiple?n:n[0])}}},t._l(t.accounts,function(e){return n("option",{domProps:{value:e.title}},[t._v(t._s(e.title))])}))])]):t._e(),n("div",{attrs:{id:"new-edit-transaction-type"}},[n("div",{attrs:{id:"new-edit-transaction-type-income"},on:{click:function(e){t.toggleType(e)}}},[n("span",[t._v("Income")])]),n("div",{attrs:{id:"new-edit-transaction-type-expense"},on:{click:function(e){t.toggleType(e)}}},[n("span",[t._v("Expense")])]),n("div",{attrs:{id:"new-edit-transaction-type-transfer"},on:{click:function(e){t.toggleType(e)}}},[n("span",[t._v("Transfer")])])]),n("div",{attrs:{id:"new-edit-transaction-options"}},[n("div",{attrs:{id:"new-edit-transaction-add"}},[n("button",{attrs:{type:"submit"}},[t._v(t._s(t.getWindowButtonTitle))])]),n("div",{attrs:{id:"new-edit-transaction-cancel"},on:{click:t.cancel}},[n("button",{attrs:{type:"reset"}},[t._v("Cancel")])])])])])])},rt=[],lt={name:"NewEditTransaction",props:["editTransactionData","accounts"],data:function(){return{windowTransactionData:{amount:"",day:null,month:null,year:null,title:"",description:"",account:null,to:null,type:1,id:-1}}},methods:{getToday:function(){var t=new Date;this.windowTransactionData.day=t.getDate(),this.windowTransactionData.month=t.getMonth()+1,this.windowTransactionData.year=t.getFullYear()},add:function(){for(var t=0;t<this.accounts.length;t++)this.accounts[t].title==this.windowTransactionData.account?this.windowTransactionData.account=this.accounts[t].id:this.accounts[t].title==this.windowTransactionData.to&&(this.windowTransactionData.to=this.accounts[t].id);null==this.editTransactionData?(2!=this.windowTransactionData.type&&(this.windowTransactionData.to=null),this.$emit("addTransaction",this.windowTransactionData)):this.$emit("updateTransaction",this.windowTransactionData),this.$emit("newEditTransactionWindowClose")},cancel:function(){this.$emit("newEditTransactionWindowClose")},toggleDescription:function(){var t=document.querySelector("#new-edit-transaction-title-input"),e=document.querySelector("#new-edit-transaction-description");if(e.classList.contains("visible")){var n=document.querySelector("#new-edit-transaction-description textarea");n.style.height="",n.style.marginBottom="",e.classList.remove("visible"),t.focus()}else e.classList.add("visible")},toggleType:function(t){var e,n=document.querySelectorAll("#new-edit-transaction-type > div");e="SPAN"==t.target.nodeName?t.target.parentElement:t.target;var a=e.textContent,i=!0,s=!1,o=void 0;try{for(var c,r=n[Symbol.iterator]();!(i=(c=r.next()).done);i=!0){var l=c.value;l.classList.contains("selected")&&l.classList.remove("selected")}}catch(t){s=!0,o=t}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}switch(a){case"Income":this.windowTransactionData.type=0;break;case"Expense":this.windowTransactionData.type=1;break;case"Transfer":this.windowTransactionData.type=2;break}var u=document.querySelectorAll("#new-edit-transaction-account-select > option"),d=-1,f=!0,m=!1,h=void 0;try{for(var v,p=this.accounts[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var g=v.value;if(d++,g.name==this.windowTransactionData.account)break}}catch(t){m=!0,h=t}finally{try{f||null==p.return||p.return()}finally{if(m)throw h}}u[d].selected=!0,e.classList.add("selected")}},computed:{getWindowTitle:function(){var t;return t=null==this.editTransactionData?"Add":"Edit",t},getWindowButtonTitle:function(){var t;return t=null==this.editTransactionData?"Add":"Update",t}},created:function(){if(null==this.editTransactionData)this.getToday();else{for(var t in this.editTransactionData)this.editTransactionData.hasOwnProperty(t)&&(this.windowTransactionData[t]=this.editTransactionData[t]);for(var e=0;e<this.accounts.length;e++)this.accounts[e].id==this.windowTransactionData.account&&(this.windowTransactionData.account=this.accounts[e].title)}},mounted:function(){var t=document.querySelector("#new-edit-transaction-amount-input");if(t.focus(),null==this.windowTransactionData.to){var e=document.querySelectorAll("#new-edit-transaction-type > div");e[this.windowTransactionData.type].classList.add("selected"),this.windowTransactionData.account=this.accounts[0].title,this.windowTransactionData.to=this.accounts[0].title}},updated:function(){}},ut=lt,dt=(n("478d"),Object(u["a"])(ut,ct,rt,!1,null,"7cc470b1",null));dt.options.__file="NewEditTransaction.vue";var ft=dt.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"manage-accounts"}},[n("div",{attrs:{id:"manage-accounts-content"}},[t._m(0),n("form",{attrs:{action:""},on:{submit:function(t){t.preventDefault()}}},[n("div",{staticClass:"wrapper"},[n("ul",t._l(t.accounts,function(e){return n("li",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"account.title"}],attrs:{type:"text"},domProps:{value:e.title},on:{keyup:function(n){t.titleChange(n,e)},input:function(n){n.target.composing||t.$set(e,"title",n.target.value)}}}),n("span",{staticClass:"jam jam-close",on:{click:function(n){t.remove(e)}}}),n("div",{staticClass:"total"},[n("span",[t._v("Total:")]),n("span",[t._v(t._s(e.total))])])])})),n("div",{attrs:{id:"manage-accounts-add-account"},on:{click:t.add}},[n("span",{staticClass:"jam jam-plus-circle"})]),t.addLoading?n("div",{staticClass:"loading"},[n("span",{staticClass:"jam jam-disc"})]):t._e()]),n("div",{attrs:{id:"manage-accounts-options"}},[n("div",{attrs:{id:"manage-accounts-close"},on:{click:t.close}},[n("button",{attrs:{type:"reset"}},[t._v("Close")])])]),t.deleteAccountConfirmationIsVisible?[n("div",{attrs:{id:"manage-accounts-delete-confirmation"}},[n("div",{attrs:{id:"manage-accounts-delete-confirmation-wrapper"}},[n("div",{attrs:{id:"manage-accounts-delete-confirmation-content"}},[t._m(1),t._m(2),n("div",{attrs:{id:"manage-accounts-delete-confirmation-options"}},[n("div",{attrs:{id:"manage-accounts-delete-confirmation-yes"},on:{click:t.yes}},[n("span",[t._v("Yes")])]),n("div",{attrs:{id:"manage-accounts-delete-confirmation-no"},on:{click:t.no}},[n("span",[t._v("No")])])])])])])]:t._e()],2)])])},ht=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"manage-accounts-header"}},[n("span",[t._v("Accounts")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"manage-accounts-delete-confirmation-header"}},[n("span",[t._v("Confirmation Needed")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[t._v("You have made transactions with this account")]),n("span",{staticClass:"jam jam-triangle-danger"}),n("span",[t._v("Delete Account?")])])}],vt={name:"ManageAccounts",props:["data"],data:function(){return{transactions:this.data.transactions,accounts:this.data.accounts,deleteAccountConfirmationIsVisible:!1,deleteAccountSelected:null,addLoading:!1,inputKeyTimer:null}},methods:{titleChange:function(t,e){var n=this;this.inputKeyTimer&&clearTimeout(this.inputKeyTimer),this.inputKeyTimer=setTimeout(function(){n.addLoading=!0;var t=!0,a=!1,i=void 0;try{for(var s,o=n.data.accounts[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var c=s.value;c.id==e.id&&(c.title=e.title)}}catch(t){a=!0,i=t}finally{try{t||null==o.return||o.return()}finally{if(a)throw i}}n.$vlf.getItem("file").then(function(t){t.accounts=n.data.accounts,n.$vlf.setItem("file",t).then(function(){n.addLoading=!1})})},1e3)},yes:function(){var t=this;t.addLoading=!0;for(var e=0;e<this.data.accounts.length;e++)this.data.accounts[e].id==this.deleteAccountSelected.id&&this.data.accounts.splice(e,1);this.$vlf.getItem("file").then(function(e){e.accounts=t.data.accounts,t.$vlf.setItem("file",e).then(function(){t.addLoading=!1,t.deleteAccountConfirmationIsVisible=!1,t.deleteAccountSelected=null})})},no:function(){this.deleteAccountSelected=null,this.deleteAccountConfirmationIsVisible=!1},remove:function(t){var e=!1;this.deleteAccountSelected=t;var n=!0,a=!1,i=void 0;try{for(var s,o=this.transactions[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var c=s.value;if(c.account==t.id){e=!0;break}}}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}e?this.deleteAccountConfirmationIsVisible=!0:this.yes()},add:function(){var t=this;this.addLoading=!0,this.data.lastId.accounts+=1,this.data.accounts.push({id:this.data.lastId.accounts,title:"New Account",total:0}),this.$vlf.getItem("file").then(function(e){e.accounts=t.data.accounts,e.lastId.accounts+=1,t.$vlf.setItem("file",e).then(function(){t.addLoading=!1})})},close:function(){this.$emit("manageAccountsWindowClose")}},created:function(){},updated:function(){}},pt=vt,gt=(n("289d"),Object(u["a"])(pt,mt,ht,!1,null,"1b6b799e",null));gt.options.__file="ManageAccounts.vue";var wt=gt.exports,yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"notification-box"}},[""!=t.icon?[n("span",{class:"jam jam-"+t.icon})]:t._e(),n("span",[t._v(t._s(t.msg))])],2)},_t=[],bt={name:"NotificationBox",props:["msg","icon"],data:function(){return{}},methods:{},created:function(){},updated:function(){}},Tt=bt,Dt=(n("a730"),Object(u["a"])(Tt,yt,_t,!1,null,"336e409b",null));Dt.options.__file="NotificationBox.vue";var xt=Dt.exports,kt={name:"app",components:{"top-bar":f,"user-action":w,"quick-transaction":x,"main-content":Y,"change-month":J,"context-menu":tt,"context-delete-confirmation":ot,"new-edit-transaction":ft,"manage-accounts":wt,"notification-box":xt},data:function(){return{historyReturn:"https://panagiotiskyr.github.io/FinancesManager/",redirectUri:"https://panagiotiskyr.github.io/FinancesManager/",checkOnline:!0,checkOnlineUrl:"http://panagiotiskyr.github.io/",clientId:"k0xho83mnf2jbth",pageShown:-1,generalUserData:{selectedFilePath:"",account:{name:"",access_token:"",token_type:"",uid:"",account_id:""}},fileData:null,userMustTakeAction:!0,topBarDateData:{},selectedDateTransactionsData:{month:{num:0,name:""},year:0,transactions:[]},contextMenuIsVisible:!1,contextClickX:0,contextClickY:0,contextTransaction:null,changeMonthIsVisible:!1,newEditTransactionIsVisible:!1,editTransactionData:null,notificationIsVisible:!1,notificationMsg:"",notificationIcon:"",contextDeleteConfirmationVisible:!1,manageAccountsIsVisible:!1}},methods:{isOnline:function(t){var e=new window.XMLHttpRequest;e.open("HEAD","http://panagiotiskyr.github.io/",!0),e.timeout=5750,e.send(),e.onreadystatechange=t()},updateFile:function(){this.$vlf.setItem("file",JSON.stringify(this.fileData))},reloadApp:function(){location.reload()},changePageShown:function(){0==this.pageShown?this.pageShown=1:this.pageShown=0},changeHomescreen:function(){var t=this;this.$vlf.getItem("homescreen").then(function(e){0==e?t.$vlf.setItem("homescreen",1):t.$vlf.setItem("homescreen",0)})},updateTransactions:function(){this.getSelectedDateTransactions()},getSelectedDateTransactions:function(){if(0!=this.selectedDateTransactionsData.month.num){this.selectedDateTransactionsData.transactions=[];var t=!0,e=!1,n=void 0;try{for(var a,i=this.fileData.transactions[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var s=a.value;s.year==this.selectedDateTransactionsData.year&&s.month==this.selectedDateTransactionsData.month.num&&this.selectedDateTransactionsData.transactions.push(s)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}else{var o=new Date;this.selectedDateTransactionsData.month.num=o.getMonth()+1,this.selectedDateTransactionsData.month.name=this.fileData.settings.text.months[o.getMonth()],this.selectedDateTransactionsData.year=o.getFullYear(),this.updateTransactions()}},changeMonthOpen:function(){document.getElementsByTagName("body")[0].classList.add("full-content-window-visible"),this.changeMonthIsVisible=!0},changeMonthClose:function(){document.getElementsByTagName("body")[0].classList.remove("full-content-window-visible"),this.changeMonthIsVisible=!1},changeSelectedDate:function(t,e,n){this.selectedDateTransactionsData.month.num=t,this.selectedDateTransactionsData.month.name=e,this.selectedDateTransactionsData.year=n,this.updateTransactions(),this.changeMonthClose()},contextMenu:function(t,e){this.contextMenuIsVisible=!0,this.contextTransaction=t,this.contextClickX=e.clientX,this.contextClickY=e.clientY},contextMenuClose:function(){this.contextMenuIsVisible=!1},contextEditTransaction:function(){this.newEditTransactionWindowOpen()},contextDeleteTransaction:function(){this.contextDeleteConfirmationVisible=!0},deleteTransactionConfirmed:function(){this.deleteTransaction(),this.contextDeleteConfirmationVisible=!1},newEditTransactionWindowOpen:function(){document.getElementsByTagName("body")[0].classList.add("full-content-window-visible"),this.editTransactionData=this.contextTransaction,this.newEditTransactionIsVisible=!0},newEditTransactionWindowClose:function(){document.getElementsByTagName("body")[0].classList.remove("full-content-window-visible"),this.editTransactionData=null,this.contextTransaction=null,this.newEditTransactionIsVisible=!1},updateTransaction:function(t){var e=this,n={};for(var a in this.editTransactionData)this.editTransactionData.hasOwnProperty(a)&&t[a]!=this.editTransactionData[a]&&(n[String(a)]={value:t[a],time:(new Date).getTime()});if(Object.keys(n).length>0){for(var i=0;i<this.fileData.transactions.length;i++)if(this.fileData.transactions[i].id==t.id){for(var s in this.fileData.transactions[i])this.fileData.transactions[i].hasOwnProperty(s)&&(this.fileData.transactions[i][s]=t[s]);break}this.$vlf.getItem("file").then(function(t){t.transactions=e.fileData.transactions,e.$vlf.setItem("file",t)}),this.uploadFile(),this.updateTransactions()}this.editTransactionData=null},addTransaction:function(t){var e=this;this.fileData.lastId.transactions+=1,this.fileData.transactions.push(t),this.$vlf.getItem("file").then(function(t){t.lastId.transactions=e.fileData.lastId.transactions,t.transactions=e.fileData.transactions,e.$vlf.setItem("file",t)}),this.updateTransactions(),this.uploadFile()},deleteTransaction:function(){for(var t=this,e=(this.contextTransaction,this.contextTransaction,0);e<this.fileData.transactions.length;e++)if(this.fileData.transactions[e].id==this.contextTransaction.id){this.fileData.transactions.splice(e,1);break}this.$vlf.getItem("file").then(function(e){e.transactions=t.fileData.transactions,t.$vlf.setItem("file",e)}),this.contextTransaction=null,this.updateTransactions(),this.uploadFile()},uploadFile:function(){var t=this,e=new window.XMLHttpRequest;e.open("HEAD",t.checkOnlineUrl,!0),e.timeout=5750,e.addEventListener("load",function(e){var a=n("0032").Dropbox,i=new a({accessToken:t.generalUserData.account.access_token}),s=new Blob([JSON.stringify(t.fileData)],{type:"JSON"});i.filesUpload({path:t.generalUserData.selectedFilePath,contents:s,mode:"overwrite",autorename:!0,mute:!0}).then(function(t){}).catch(function(t){console.error(t)})}),e.send(null)},manageAccountsWindowOpen:function(){document.getElementsByTagName("body")[0].classList.add("full-content-window-visible"),this.manageAccountsIsVisible=!0},manageAccountsWindowClose:function(){document.getElementsByTagName("body")[0].classList.remove("full-content-window-visible"),this.manageAccountsIsVisible=!1},showNotification:function(t,e,n){if(this.notificationMsg=t,this.notificationIcon=e,this.notificationIsVisible=!0,n){var a=this;setTimeout(function(){a.notificationIsVisible=!1},1e3)}},hideNotification:function(){this.notificationIsVisible=!1},initApp:function(){var t=this;this.$vlf.getItem("access_token").then(function(e){if(null==e){var n=sessionStorage.getItem("homescreen");null==n?(t.pageShown=0,sessionStorage.setItem("homescreen",0)):t.pageShown=n}else t.$vlf.getItem("homescreen").then(function(e){null==e?(t.pageShown=0,t.$vlf.setItem("homescreen",0)):t.pageShown=e})}),this.getSelectedDateTransactions()}},computed:{},created:function(){},mounted:function(){}},St=kt,Ct=(n("5c0b"),Object(u["a"])(St,i,s,!1,null,null,null));Ct.options.__file="App.vue";var At=Ct.exports,Mt=n("bc30");n("8770"),n("98c6");a["a"].config.productionTip=!1,a["a"].use(Mt["a"]),new a["a"]({render:function(t){return t(At)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var a=n("2856"),i=n.n(a);i.a},"5d6e":function(t,e,n){"use strict";var a=n("8b3b"),i=n.n(a);i.a},6310:function(t,e,n){},"735b":function(t,e,n){"use strict";var a=n("09fa"),i=n.n(a);i.a},7360:function(t,e,n){"use strict";var a=n("9f9e"),i=n.n(a);i.a},"81ff":function(t,e,n){"use strict";var a=n("8d4c"),i=n.n(a);i.a},"8b3b":function(t,e,n){},"8d4c":function(t,e,n){},"90e5":function(t,e,n){"use strict";var a=n("e8db"),i=n.n(a);i.a},"9f9e":function(t,e,n){},a730:function(t,e,n){"use strict";var a=n("dc6e"),i=n.n(a);i.a},a87e:function(t,e,n){},b711:function(t,e,n){"use strict";var a=n("4ee6"),i=n.n(a);i.a},ba11:function(t,e,n){"use strict";var a=n("6310"),i=n.n(a);i.a},cc28:function(t,e,n){},dc6e:function(t,e,n){},e8db:function(t,e,n){}});
//# sourceMappingURL=app.031e100c.js.map